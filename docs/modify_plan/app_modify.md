C:\00_mycode\Invest\docs\20260131_modify.mdを読んで
以下を順番に実装してほしい
修正中は agent に含まれる code-review / test / refactor エージェントを適宜使用してください。最後にプルリクエストを提出すること。開発の際は開発ブランチで作業すること。

# Invest プロジェクト改善タスク分解（チェックリスト）  
  

  
## 5. Electron アプリ統合（段階導入プラン）  
> 目的：Pythonの機能をGUIに載せて、スクリーニング→チャート閲覧→（将来）エントリー候補表示→バックテストを一連で回せるようにする  
  
### 5-1. アーキテクチャ設計（最初に決める）  
- [ ] **Python実行方式を決める**  
  - [ ] Electronから `python` を subprocess 起動する方式（開発が速い）  
  - [ ] 将来的に配布する場合の同梱方式（pyinstaller等）を検討（別タスクでOK）  
- [ ] **Python側のI/O仕様を決める**  
  - [ ] JSONで結果を返すモード（例: `--json`）を追加  
  - [ ] 進捗を標準出力でストリーム（JSON Lines等）できるようにする  
- [ ] **Electron側のIPC設計**  
  - [ ] `screen:run`, `tickers:update`, `backtest:run` などのチャンネル定義  
  - [ ] 実行中キャンセル（kill）を扱う設計  
  
### 5-2. 画面共通（ウィンドウサイズなど）  
- [ ] **アプリのウィンドウサイズを拡大**  
  - [ ] 初期サイズ（例: 1200×800 など）を設定  
  - [ ] 最小サイズも適切に設定（極端に小さくならない）  
  
### 5-3. Stage2 スクリーニング結果 → 銘柄選択 → チャート表示タブ  
- [ ] **UIタブ作成：Screening**  
  - [ ] 「スクリーニング実行」ボタン  
  - [ ] 実行中ローディング表示  
  - [ ] 結果テーブル表示（ソート/フィルタ/検索）  
- [ ] **銘柄選択からチャート表示**  
  - [ ] 結果テーブルの行クリックで銘柄選択  
  - [ ] チャートコンポーネント表示  
- [ ] **TradingView風UIに寄せる**  
  - [ ] チャートライブラリ選定（例: TradingView Lightweight Charts）  
  - [ ] ローソク足＋出来高  
  - [ ] SMA(50/150/200) 等のオーバーレイ  
  - [ ] （将来用）エントリーポイント描画の枠だけ先に用意（ダミー表示でもOK）  
  
### 5-4. `update_tickers_extended.py` 実行専用タブ  
- [ ] **UIタブ作成：Tickers**  
  - [ ] 「更新実行」ボタン  
  - [ ] 取得中ローディング（進捗%やスピナー）  
  - [ ] 完了後に `config/tickers.csv` の内容を画面表示  
- [ ] **見やすくする工夫**  
  - [ ] 検索（ticker/sector）  
  - [ ] ソート（sector、件数など）  
  - [ ] 取得サマリ表示（合計取得数→最終保存数）  
  - [ ] エラー/失敗銘柄の一覧表示（別テーブル or ダウンロード）  
  
### 5-5. バックテスト専用タブ（リアルタイム表示）  
- [ ] **UIタブ作成：Backtest**  
  - [ ] 対象銘柄の選択UI（Stage2結果から選ぶ）  
  - [ ] 期間・ベンチマーク有無などの設定UI（最低限）  
  - [ ] 「バックテスト開始/停止」ボタン  
- [ ] **リアルタイム進捗表示（可能な範囲で）**  
  - [ ] Python側で「進捗イベント」を出す（例: 日付、エクイティ、保有数、直近の売買ログ）  
  - [ ] Electron側でストリームを受け取り、ログとメトリクスを更新  
  - [ ] 最終結果（損益、DD、シャープ、トレード一覧）をテーブル表示  
  - [ ] （任意）簡易エクイティカーブ描画  
  
### 5-6. 設定画面（ダミー実装）  
- [ ] **左下タブに歯車アイコンの Settings**  
  - [ ] よくある設定画面の見た目（フォーム、トグル、保存ボタン）  
  - [ ] まずはダミー（保存しても実処理しない）  
  - [ ] 将来の設定項目案（例: params.yaml の編集、API遅延、ベンチマークON/OFF）を並べる  
  
---  
  
## 6.（任意だが強く推奨）品質向上：テストと保守性  
- [ ] `pytest` の最低限テストを追加  
  - [ ] `StageDetector.check_stage2_conditions()` の固定データでの判定テスト  
  - [ ] `calculate_all_indicators()` が期待カラムを生成するテスト  
- [ ] 「データ取得に依存しない」ユニットテストを優先（yfinanceはモック化）  
- [ ] ロギングの方針を統一（INFO/DEBUGの使い分け、過剰ログ抑制）  
  
---  
  
# 優先度おすすめ（すぐ効く順）  
- [ ] P0: venv整備 + README  
- [ ] P0: `update_tickers_extended.py` の取得件数/フィルタ件数の表示（170件問題の切り分け）  
- [ ] P1: `--explain-stage2 TICKER` 機能（漏れ理由の可視化）  
- [ ] P1: バックテスト進捗表示 + エントリー0件の原因サマリ  
- [ ] P2: Electron統合（Screeningタブ → Chartタブ）から着手  
- [ ] P3: Tickersタブ、Backtestタブ、Settingsダミー  
  
